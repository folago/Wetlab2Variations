<?xml version="1.0"?>
<tool id="samtools-index" name="samtools-index" version="0.1.0" python_template_version="3.5">
    <requirements>
        <container type="docker">quay.io/broadinstitute/samtools:1.3</container>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
    #set $localinput = 'input.bam'
    ln -s '$input' '$localinput' &&
    samtools index -b $localinput  $output
    ]]></command>
    <inputs>
        <param type="data" name="input" format="bam" label="Input BAM"/>
    </inputs>
    <outputs>
        <data name="output" format="bai" label="Samtools Index"/>
    </outputs>
    <help><![CDATA[
Usage: samtools index [-bc] [-m INT] <in.bam> [out.index]
Options:
  -b       Generate BAI-format index for BAM files [default]
  -c       Generate CSI-format index for BAM files
  -m INT   Set minimum interval size for CSI indices to 2^INT [14]
  -@ INT   Sets the number of threads [none]

    ]]></help>
<citations>
    <citation type="doi">10.1093/bioinformatics/btp352</citation>
 </citations>
</tool>