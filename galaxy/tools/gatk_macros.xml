<macros>
    <xml name="refGenomeSourceConditional">
        <conditional name="source">
            <param label="Choose the source for the reference genome" name="index_source" type="select">
                <option value="cached">Use a built-in genome</option>
                <option value="history">Use a genome from the history</option>
            </param>
            <when value="cached">
                <param name="reference" type="select" label="Using reference genome" help="Select genome from the list">
                    <options from_data_table="fasta_indexes">
                        <filter type="sort_by" column="2" />
                        <validator type="no_options" message="No indexes are available" />
                    </options>
                    <validator type="no_options" message="A built-in reference genome is not available for the build associated with the selected input file"/>
                </param>
            </when>
            <when value="history">
                <param name="reference" type="data" format="fasta" label="Using reference file" />
                <param name="reference_fai" type="data" format="fai" label="Index of reference file" />
            </when>
        </conditional>
    </xml>
</macros> 



